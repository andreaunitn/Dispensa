<html>
<head>
    <title>Login</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
          crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        .login {
            background-color: white;
            overflow: hidden;
            padding: 8px;
            width: 40%;
            height: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            margin: -250px 0 0 -350px;
            border-radius: 8px;
        }
    </style>
</head>
<body class="container" style="background-color:#63bb66"> <!-- style="background-size: cover; background-repeat: no-repeat;background-image: url('https://thumbs.dreamstime.com/b/balanced-diet-food-background-balanced-diet-food-background-organic-food-healthy-nutrition-superfoods-meat-fish-legumes-nuts-121936796.jpg')"> -->

           <div class="login" name="registerform" id="registerform">
              <h1 style="text-align:center">La Dispensa</h1>
              <hr>
               <h5 style="text-align: center">Registrati</h5>
               <br>
               <b><label style="padding: 30px">Nome: </label></b><input type="text" name="nome" id="registerNome" style="width: 250px" placeholder="Marco" required >
               <br>
               <b><label style="padding: 15px">Cognome: </label></b><input type="text" name="cognome" id="registerCognome" style="width: 250px" placeholder="Ronchetti" required >
               <br>
               <b><label style="padding: 30px">Email: </label></b><input type="email" name="email" id="registerEmail" style="width: 250px" placeholder="marco.ronchetti@unitn.it" required >
               </br>
               <b><label style="padding: 14px">Password:</label></b><input type="password" name="password" id="registerPassword" style="width: 250px" required>
               </br></br>
               <button style="float: right" type="submit" onclick="register()">Sign-in</button>
            </div>
</body>
<script>

        var loggedUser = {};
        rootUrl = document.location.origin

        function register() {

          nome = document.getElementById('registerNome').value
          cognome = document.getElementById('registerCognome').value
          email = document.getElementById('registerEmail').value
          password = document.getElementById('registerPassword').value


          $.ajax({
              type: 'POST',
              url:  rootUrl + '/api/v1/authentication/register',
              data: 'nome=' + nome + '&cognome=' + cognome + '&email=' + email + '&password=' + password,
              datatype: 'json',
              success: function (data) {
                //console.log(data)

                if (data.success) {
                  //console.log(data.token)
                  localStorage.setItem('token',data.token)
                  window.location.href='/'

                } else {
                  window.alert(data.message)
                  document.getElementById('loginPassword').innerHTML=''
                }

              }
          });
          };

</script>
</html>
