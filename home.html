<!DOCTYPE html>
<html>
    <head>
        <title>
            La Dispensa
        </title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    </head>
    <body>
        <h1>
            Dispensa
        </h1>
        <h3>
            Inserisci gli ingredienti
        </h3>
        <input type="text", id="ingrediente">
        <button onclick="add_ingredient()", id="submit">Inserisci ingrediente</button>
    </body>
    <script>

        ingredienti = []

        $(document).ready(function() {
            function add_ingredient() {
                const ingr = document.getElementById('ingrediente').value;
                ingredienti.push(ingr)
            }

            $.ajax({
                type: 'GET',
                url: 'http://localhost:3000/cercaRicette',
                data: 'ingredienti=' + JSON.stringify(ingredienti),
                datatype: 'html',
                success: function (data) {
                    var div = document.createElement('div')
                    var ul = document.createElement('ul')
                    
                    var ricette = JSON.parse(data)
                    for (var i = 0; i < ricette.length; i++) {
                        const ricetta = ricette[i]

                        var li = document.createElement('li')
                        li.value = ricetta

                        ul.appendChild(li)
                    }
                    
                    div.appendChild(ul)
                }
            });
        })

    </script>
</html>